# Application E-commerce - Exemple Complet

Cette section pr√©sente une application e-commerce compl√®te utilisant MulerTech Database ORM, d√©montrant une architecture moderne avec gestion des produits, commandes, paiements et inventaire.

## Vue d'ensemble

L'application e-commerce comprend :
- **Gestion des produits** avec cat√©gories, variants et inventaire
- **Syst√®me de commandes** complet avec workflow de statuts
- **Gestion des clients** avec profils et historique
- **Panier d'achat** persistant et optimis√©
- **Syst√®me de paiement** avec multiple m√©thodes
- **Gestion d'inventaire** en temps r√©el
- **API REST compl√®te** pour int√©grations tierces

## Structure du projet

```
e-commerce/
‚îú‚îÄ‚îÄ README.md                    # Ce fichier
‚îú‚îÄ‚îÄ 01-project-setup.md         # Configuration du projet
‚îú‚îÄ‚îÄ 02-entities.md              # D√©finition des entit√©s
‚îú‚îÄ‚îÄ 03-catalog-management.md    # Gestion du catalogue produits
‚îú‚îÄ‚îÄ 04-cart-system.md           # Syst√®me de panier
‚îú‚îÄ‚îÄ 05-order-processing.md      # Traitement des commandes
‚îú‚îÄ‚îÄ 06-payment-integration.md   # Int√©gration des paiements
‚îú‚îÄ‚îÄ 07-inventory-management.md  # Gestion des stocks
‚îú‚îÄ‚îÄ 08-customer-management.md   # Gestion des clients
‚îú‚îÄ‚îÄ 09-api-endpoints.md         # API REST compl√®te
‚îî‚îÄ‚îÄ 10-advanced-features.md     # Fonctionnalit√©s avanc√©es
```

## Fonctionnalit√©s d√©montr√©es

### Architecture e-commerce
- **Catalogue produits** avec variants et attributs personnalis√©s
- **Syst√®me de prix** complexe avec promotions et r√©ductions
- **Gestion d'inventaire** multi-entrep√¥ts
- **Workflow de commandes** avec √©tats et transitions
- **Int√©gration paiements** multi-providers

### Relations complexes
- **OneToMany** : Category ‚Üí Products, Customer ‚Üí Orders
- **ManyToMany** : Product ‚Üî Tags, Order ‚Üî Products (avec quantit√©s)
- **OneToOne** : Order ‚Üí Payment, Customer ‚Üí Profile
- **Polymorphique** : Address (Billing/Shipping)

### Concepts avanc√©s e-commerce
- **Variants de produits** (couleur, taille, mat√©riau)
- **Pricing dynamique** avec r√®gles et promotions
- **Inventaire temps r√©el** avec r√©servations
- **Cache intelligent** pour performance
- **Events** pour audit et notifications
- **Queue processing** pour t√¢ches lourdes

## Structure de donn√©es

### Sch√©ma principal

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ customers   ‚îÇ    ‚îÇ   orders    ‚îÇ    ‚îÇ   products  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)     ‚îÇ‚óÑ‚îÄ‚îÄ‚îê‚îÇ id (PK)     ‚îÇ   ‚îå‚ñ∫‚îÇ id (PK)     ‚îÇ
‚îÇ email       ‚îÇ   ‚îÇ‚îÇ number      ‚îÇ   ‚îÇ ‚îÇ name        ‚îÇ
‚îÇ first_name  ‚îÇ   ‚îÇ‚îÇ status      ‚îÇ   ‚îÇ ‚îÇ slug        ‚îÇ
‚îÇ last_name   ‚îÇ   ‚îÇ‚îÇ customer_id ‚îú‚îÄ‚îÄ‚îÄ‚îò ‚îÇ description ‚îÇ
‚îÇ phone       ‚îÇ   ‚îÇ‚îÇ total       ‚îÇ     ‚îÇ price       ‚îÇ
‚îÇ created_at  ‚îÇ   ‚îÇ‚îÇ tax_amount  ‚îÇ     ‚îÇ category_id ‚îÇ
‚îÇ updated_at  ‚îÇ   ‚îÇ‚îÇ created_at  ‚îÇ     ‚îÇ brand_id    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ sku         ‚îÇ
                  ‚îÇ                    ‚îÇ stock_qty   ‚îÇ
                  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ is_active   ‚îÇ
                  ‚îî‚ñ∫‚îÇ order_items ‚îÇ    ‚îÇ created_at  ‚îÇ
                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ id (PK)     ‚îÇ           ‚îÇ
                    ‚îÇ order_id    ‚îÇ           ‚îÇ
                    ‚îÇ product_id  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ variant_id  ‚îÇ
                    ‚îÇ quantity    ‚îÇ
                    ‚îÇ unit_price  ‚îÇ
                    ‚îÇ total_price ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ categories  ‚îÇ    ‚îÇ   brands    ‚îÇ    ‚îÇ    tags     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÇ id (PK)     ‚îÇ    ‚îÇ id (PK)     ‚îÇ
‚îÇ name        ‚îÇ    ‚îÇ name        ‚îÇ    ‚îÇ name        ‚îÇ
‚îÇ slug        ‚îÇ    ‚îÇ slug        ‚îÇ    ‚îÇ slug        ‚îÇ
‚îÇ parent_id   ‚îÇ    ‚îÇ logo_url    ‚îÇ    ‚îÇ color       ‚îÇ
‚îÇ is_active   ‚îÇ    ‚îÇ is_active   ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
       ‚îÇ                  ‚îÇ                  ‚îÇ
       ‚îÇ                  ‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ                  ‚îÇ         ‚îÇ product_tags‚îÇ
       ‚îÇ                  ‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
       ‚îÇ                  ‚îÇ         ‚îÇ product_id  ‚îÇ
       ‚îÇ                  ‚îÇ         ‚îÇ tag_id      ‚îÇ
       ‚îÇ                  ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                  ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ   variants  ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
       ‚îÇ id (PK)     ‚îÇ
       ‚îÇ product_id  ‚îÇ
       ‚îÇ name        ‚îÇ
       ‚îÇ sku         ‚îÇ
       ‚îÇ price_adj   ‚îÇ
       ‚îÇ stock_qty   ‚îÇ
       ‚îÇ attributes  ‚îÇ (JSON)
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Sch√©ma de panier et paiement

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    carts    ‚îÇ    ‚îÇ cart_items  ‚îÇ    ‚îÇ  payments   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÇ id (PK)     ‚îÇ    ‚îÇ id (PK)     ‚îÇ
‚îÇ session_id  ‚îÇ    ‚îÇ cart_id     ‚îÇ    ‚îÇ order_id    ‚îÇ
‚îÇ customer_id ‚îÇ    ‚îÇ product_id  ‚îÇ    ‚îÇ amount      ‚îÇ
‚îÇ created_at  ‚îÇ    ‚îÇ variant_id  ‚îÇ    ‚îÇ method      ‚îÇ
‚îÇ updated_at  ‚îÇ    ‚îÇ quantity    ‚îÇ    ‚îÇ status      ‚îÇ
‚îÇ expires_at  ‚îÇ    ‚îÇ unit_price  ‚îÇ    ‚îÇ gateway_ref ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ added_at    ‚îÇ    ‚îÇ processed_at‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  addresses  ‚îÇ    ‚îÇ   coupons   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)     ‚îÇ    ‚îÇ id (PK)     ‚îÇ
‚îÇ type        ‚îÇ    ‚îÇ code        ‚îÇ
‚îÇ customer_id ‚îÇ    ‚îÇ type        ‚îÇ
‚îÇ first_name  ‚îÇ    ‚îÇ value       ‚îÇ
‚îÇ last_name   ‚îÇ    ‚îÇ min_amount  ‚îÇ
‚îÇ company     ‚îÇ    ‚îÇ expires_at  ‚îÇ
‚îÇ street      ‚îÇ    ‚îÇ usage_limit ‚îÇ
‚îÇ city        ‚îÇ    ‚îÇ used_count  ‚îÇ
‚îÇ postal_code ‚îÇ    ‚îÇ is_active   ‚îÇ
‚îÇ country     ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ is_default  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Quick Start

1. **Installation du projet**
   ```bash
   composer create-project mulertech/database-ecommerce-example ecommerce
   cd ecommerce
   ```

2. **Configuration de la base de donn√©es**
   ```php
   // config/database.php
   return [
       'driver' => 'mysql',
       'host' => 'localhost',
       'database' => 'ecommerce_example',
       'username' => 'root',
       'password' => '',
       'options' => [
           PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8mb4',
           PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
           PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
       ]
   ];
   ```

3. **Ex√©cution des migrations**
   ```bash
   php bin/console mt:migration:migrate
   ```

4. **Chargement des donn√©es de d√©monstration**
   ```bash
   php bin/console fixtures:load
   ```

5. **Configuration des services tiers**
   ```php
   // config/services.php
   return [
       'payment_gateways' => [
           'stripe' => [
               'secret_key' => 'sk_test_...',
               'public_key' => 'pk_test_...'
           ],
           'paypal' => [
               'client_id' => 'your_client_id',
               'client_secret' => 'your_client_secret',
               'mode' => 'sandbox'
           ]
       ],
       'shipping' => [
           'providers' => ['ups', 'fedex', 'dhl']
       ]
   ];
   ```

6. **D√©marrage du serveur**
   ```bash
   php -S localhost:8000 -t public/
   ```

## Navigation

- **[Configuration du projet](01-project-setup.md)** - Installation et configuration
- **[Entit√©s](02-entities.md)** - Mod√®les de donn√©es e-commerce
- **[Gestion du catalogue](03-catalog-management.md)** - Produits, cat√©gories, variants
- **[Syst√®me de panier](04-cart-system.md)** - Panier persistant et optimis√©
- **[Traitement des commandes](05-order-processing.md)** - Workflow complet
- **[Int√©gration des paiements](06-payment-integration.md)** - Multi-providers
- **[Gestion d'inventaire](07-inventory-management.md)** - Stocks temps r√©el
- **[Gestion des clients](08-customer-management.md)** - Profils et pr√©f√©rences
- **[API REST](09-api-endpoints.md)** - Interface programmatique compl√®te
- **[Fonctionnalit√©s avanc√©es](10-advanced-features.md)** - Analytics, reporting, etc.

## Concepts cl√©s d√©montr√©s

### üè™ Architecture E-commerce
- Structure modulaire orient√©e domaine
- S√©paration claire des responsabilit√©s
- Patterns e-commerce √©prouv√©s
- √âvolutivit√© et maintenance

### üí∞ Gestion des prix
- Prix dynamiques avec r√®gles
- Promotions et codes de r√©duction
- Calculs de taxes automatis√©s
- Multi-devises support

### üì¶ Gestion des stocks
- Inventaire temps r√©el
- R√©servations temporaires
- Multi-entrep√¥ts
- Alertes de stock bas

### üõí Exp√©rience d'achat
- Panier persistant cross-device
- Checkout optimis√©
- Multiple m√©thodes de paiement
- Suivi de commande en temps r√©el

### üöÄ Performance
- Cache intelligent multi-niveaux
- Optimisations de requ√™tes
- CDN pour les images
- Pagination efficace

### üîê S√©curit√©
- Validation stricte des donn√©es
- Protection contre la fraude
- Chiffrement des donn√©es sensibles
- Audit complet des transactions

### üìä Analytics
- Suivi des conversions
- Analytics des ventes
- Rapports de performance
- KPIs m√©tier

---

Cette application e-commerce sert d'exemple de r√©f√©rence pour construire une plateforme de vente en ligne compl√®te et moderne avec MulerTech Database ORM.
